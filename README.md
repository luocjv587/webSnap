# WebSnap - 网页快照工具

一个功能强大的Chrome浏览器扩展，可以快速截取网页快照、自动命名保存、统一管理。

## 功能特点

- 📸 **普通截图**: 快速截取当前可见区域
- 📄 **长截图**: 智能截取完整页面内容，支持自动滚动拼接
- ✂️ **区域截图**: 自由选择截图区域
- 📝 **智能命名**: 根据页面标题自动生成文件名
- 💾 **自动保存**: 图片自动保存到下载目录的webSnap文件夹
- 📚 **历史记录**: 完整的截图历史管理，支持搜索和导出
- ⌨️ **快捷键支持**: 支持键盘快捷键快速截图
- 🌙 **主题切换**: 支持日间/夜间模式切换

## 准备工作

在安装插件之前，你需要准备一些图标文件。由于项目中的SVG图标需要转换为PNG格式，请按照以下步骤操作：

### 生成图标文件

你需要将 `icons/icon.svg` 转换为以下尺寸的PNG文件：
- `icons/icon16.png` (16x16像素)
- `icons/icon48.png` (48x48像素)  
- `icons/icon128.png` (128x128像素)

你可以使用以下方法之一：

#### 方法A：在线转换工具
1. 访问 https://convertio.co/svg-png/ 或类似的在线转换工具
2. 上传 `icons/icon.svg` 文件
3. 分别设置输出尺寸为16x16、48x48、128x128
4. 下载转换后的PNG文件并重命名

#### 方法B：使用图像编辑软件
1. 使用Photoshop、GIMP或Inkscape等软件
2. 打开SVG文件
3. 导出为不同尺寸的PNG文件

#### 方法C：使用命令行工具（如果你有ImageMagick）
```bash
convert icons/icon.svg -resize 16x16 icons/icon16.png
convert icons/icon.svg -resize 48x48 icons/icon48.png
convert icons/icon.svg -resize 128x128 icons/icon128.png
```

## 安装方法

### 步骤1：准备文件
确保你的项目文件夹包含以下文件：
```
webSnap/
├── manifest.json
├── popup.html
├── popup.js
├── background.js
├── history.html
├── history.js
├── jszip.min.js
├── icons/
│   ├── icon16.png
│   ├── icon48.png
│   └── icon128.png
├── README.md
└── INSTALL.md
```

### 步骤2：在Chrome中安装

1. **打开Chrome浏览器**

2. **进入扩展管理页面**
   - 在地址栏输入：`chrome://extensions/`
   - 或者点击菜单 → 更多工具 → 扩展程序

3. **开启开发者模式**
   - 在页面右上角找到"开发者模式"开关
   - 点击开启（开关会变成蓝色）

4. **加载扩展程序**
   - 点击"加载已解压的扩展程序"按钮
   - 在弹出的文件选择器中选择你的项目文件夹（webSnap）
   - 点击"选择文件夹"

5. **验证安装**
   - 如果安装成功，你会在扩展列表中看到"WebSnap - 网页快照工具"
   - 插件图标会出现在浏览器工具栏中

### 步骤3：测试插件

1. **打开任意网页**（比如百度、谷歌等）

2. **点击插件图标**
   - 在浏览器工具栏中找到WebSnap图标
   - 点击图标打开弹出窗口

3. **测试截图功能**
   - 点击"📸 截取网页快照"按钮
   - 等待处理完成
   - 检查下载文件夹中是否有生成的图片文件

## 使用方法

### 弹窗操作
1. 打开任意网页
2. 点击浏览器工具栏中的WebSnap图标
3. 在弹出的窗口中选择截图类型：
   - 📸 **截取网页快照**: 截取当前可见区域
   - 📄 **长截图**: 智能截取完整页面
   - ✂️ **区域截图**: 自由选择截图区域
   - 📚 **历史记录**: 查看和管理截图历史
4. 等待处理完成，图片将自动保存到下载目录的webSnap文件夹

### 快捷键操作
- `Ctrl+Shift+1` (Mac: `Cmd+Shift+1`): 普通截图
- `Ctrl+Shift+2` (Mac: `Cmd+Shift+2`): 长截图
- `Ctrl+Shift+3` (Mac: `Cmd+Shift+3`): 区域截图
- `Ctrl+Shift+H` (Mac: `Cmd+Shift+H`): 打开历史记录

## 故障排除

### 常见问题

**Q: 插件安装后没有显示图标？**
A: 确保你已经生成了正确尺寸的PNG图标文件，并且文件名与manifest.json中的配置一致。

**Q: 点击插件没有反应？**
A: 检查浏览器控制台是否有错误信息。确保所有JavaScript文件都正确加载。

**Q: 截图功能不工作？**
A: 某些网站可能因为安全策略限制截图功能。尝试在不同的网站上测试。

**Q: 长截图拼接有问题？**
A: 检查是否有固定定位元素干扰，或者页面动态加载内容较多，可以稍等片刻再试。

**Q: 图片没有下载？**
A: 检查Chrome的下载设置，确保下载目录可写。某些浏览器可能阻止自动下载。

### 调试方法

1. **查看扩展错误**
   - 在 `chrome://extensions/` 页面找到WebSnap
   - 点击"错误"按钮查看详细错误信息

2. **查看控制台日志**
   - 右键点击插件图标 → 检查弹出内容
   - 在开发者工具中查看Console标签页的错误信息

3. **重新加载扩展**
   - 在扩展管理页面点击WebSnap的"重新加载"按钮

## 更新插件

当你修改了插件代码后：

1. 在 `chrome://extensions/` 页面找到WebSnap
2. 点击"重新加载"按钮
3. 刷新测试页面

## 卸载插件

1. 在 `chrome://extensions/` 页面找到WebSnap
2. 点击"移除"按钮
3. 确认卸载

## 技术实现

- **Manifest V3**: 使用最新的Chrome扩展API
- **智能长截图**: 自动滚动页面并拼接完整内容
- **Canvas截图**: 使用HTML5 Canvas进行网页截图
- **智能命名**: 基于页面标题的智能文件命名算法
- **历史管理**: 完整的截图历史记录和搜索功能

## 文件结构

```
webSnap/
├── manifest.json      # 扩展配置文件
├── popup.html         # 弹出窗口界面
├── popup.js          # 弹出窗口逻辑
├── background.js     # 后台脚本（截图和下载）
├── history.html      # 历史记录页面
├── history.js        # 历史记录逻辑
├── jszip.min.js      # ZIP压缩库
├── icons/            # 图标文件夹
└── README.md         # 说明文档
```

## 注意事项

- 某些网站可能因安全策略限制截图功能
- 图片质量取决于网页的渲染效果
- 长截图功能在无限滚动页面上可能效果不佳
- 所有截图文件保存在下载目录的webSnap文件夹中

## 开发说明

### 依赖项
- Chrome Extension API
- JSZip (用于导出功能)

### 权限说明
- `activeTab`: 访问当前活动标签页
- `downloads`: 下载文件到本地
- `storage`: 存储扩展数据
- `scripting`: 注入脚本进行截图

## 技术支持

如果遇到问题，请检查：
- Chrome浏览器版本是否支持Manifest V3
- 文件权限是否正确
- 所有必需文件是否存在

## 更新日志

### v2.0.0
- 重构长截图功能，提升成功率和拼接质量
- 新增区域截图功能
- 新增完整的历史记录管理
- 支持快捷键操作
- 支持主题切换
- 优化文件管理，统一保存到webSnap文件夹

### v1.0.0
- 初始版本发布
- 实现基本的网页截图功能
- 智能文件命名
- 自动下载保存

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request来改进这个项目！